let l=[],i=0;const f=4,c=o=>{let s=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},lc:0,listen(t){return e.lc=s.push(t),()=>{for(let u=i+f;u<l.length;)l[u]===t?l.splice(u,f):u+=f;let n=s.indexOf(t);~n&&(s.splice(n,1),--e.lc||e.off())}},notify(t,n){let u=!l.length;for(let r of s)l.push(r,e.value,t,n);if(u){for(i=0;i<l.length;i+=f)l[i](l[i+1],l[i+2],l[i+3]);l.length=0}},off(){},set(t){let n=e.value;n!==t&&(e.value=t,e.notify(n))},subscribe(t){let n=e.listen(t);return t(e.value),n},value:o};return e},a=c(0);export{a as $};
